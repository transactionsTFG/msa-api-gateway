{
    "openapi": "3.0.1",
    "servers": [
        { "url": "/msa-api-gateway/gateway", "description": "API Gateway" }
    ],
    "tags": [
        {
            "name": "Agencia",
            "description": "Orquestador de operaciones de viaje"
        },
        {
            "name": "Reservas",
            "description": "Operaciones sobre reservas de hotel"
        },
        {
            "name": "Vuelos",
            "description": "Operaciones sobre vuelos"
        },
        {
            "name": "Room",
            "description": "Operaciones de habitaciones"
        },
        {
            "name": "User",
            "description": "Operaciones de usuarios"
        }
    ],
    "paths": {
        "/agency/create/airline": {
            "post": {
                "tags": [
                    "Agencia"
                ],
                "summary": "Crear reserva de aviÃ³n",
                "operationId": "createAirlineAndHotelReservation",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ReservationAirlineRequestDTO"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Reserva de aviÃ³n creada"
                    }
                }
            }
        },
        "/agency/create/hotel-airline": {
            "post": {
                "tags": [
                    "Agencia"
                ],
                "summary": "Crear reserva combinada hotel + aviÃ³n",
                "operationId": "createAirlineAndHotelReservation_1",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateAirlineAndHotelReservationDTO"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Reserva combinada creada"
                    }
                }
            }
        },
        "/agency/create/hotel": {
            "post": {
                "tags": [
                    "Agencia"
                ],
                "summary": "Crear reserva de hotel",
                "operationId": "createHotelReservation",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateHotelBookingDTO"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Reserva de hotel creada"
                    }
                }
            }
        },
        "/agency/delete/hotel-airline/{reservationId}/{bookingId}": {
            "delete": {
                "tags": [
                    "Agencia"
                ],
                "summary": "Eliminar reserva combinada hotel + aviÃ³n",
                "operationId": "deleteAirlineAndHotelReservation",
                "parameters": [
                    {
                        "name": "reservationId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    },
                    {
                        "name": "bookingId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Reserva combinada eliminada"
                    }
                }
            }
        },
        "/agency/delete/airline/{reservationId}": {
            "delete": {
                "tags": [
                    "Agencia"
                ],
                "summary": "Eliminar reserva de aviÃ³n",
                "operationId": "deleteAirlineReservation",
                "parameters": [
                    {
                        "name": "reservationId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Reserva de aviÃ³n eliminada"
                    }
                }
            }
        },
        "/agency/delete/hotel/{bookingId}": {
            "delete": {
                "tags": [
                    "Agencia"
                ],
                "summary": "Eliminar reserva de hotel",
                "operationId": "deleteHotelBooking",
                "parameters": [
                    {
                        "name": "bookingId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Reserva de hotel eliminada"
                    }
                }
            }
        },
        "/agency/hotel-airline/{hotelId}/{airlineId}": {
            "get": {
                "tags": [
                    "Agencia"
                ],
                "summary": "Obtener viaje por ID de hotel y aerolinea",
                "operationId": "getTravelByHotelAndAirline",
                "parameters": [
                    {
                        "name": "hotelId",
                        "in": "path",
                        "description": "Identificador del hotel",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "airlineId",
                        "in": "path",
                        "description": "Identificador de la aerolinea",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "hotelId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    },
                    {
                        "name": "airlineId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Viaje encontrado"
                    },
                    "404": {
                        "description": "Viaje no encontrado"
                    }
                }
            }
        },
        "/agency/travel/{id}": {
            "get": {
                "tags": [
                    "Agencia"
                ],
                "summary": "Obtener viaje por ID",
                "operationId": "getTravelById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Identificador del viaje",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Viaje encontrado"
                    },
                    "404": {
                        "description": "Viaje no encontrado"
                    }
                }
            }
        },
        "/agency/travel/user/{idUser}": {
            "get": {
                "tags": [
                    "Agencia"
                ],
                "summary": "Obtener viajes por ID de usuario",
                "operationId": "getTravelByIdUser",
                "parameters": [
                    {
                        "name": "idUser",
                        "in": "path",
                        "description": "Identificador del usuario",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "idUser",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de viajes obtenida"
                    }
                }
            }
        },
        "/agency/list": {
            "get": {
                "tags": [
                    "Agencia"
                ],
                "summary": "Obtener lista de viajes de Hotel con Aerolinea",
                "operationId": "getTravelList",
                "parameters": [
                    {
                        "name": "countryOrigin",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "countryDestination",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "cityOrigin",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "cityDestination",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "dateOrigin",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "hotelName",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de viajes obtenida"
                    }
                }
            }
        },
        "/agency/update/hotel-airline": {
            "put": {
                "tags": [
                    "Agencia"
                ],
                "summary": "Actualizar reserva combinada hotel + aviÃ³n",
                "operationId": "updateAirlineAndHotelReservation",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateReservationBookingDTO"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Reserva combinada actualizada"
                    }
                }
            }
        },
        "/agency/update/airline": {
            "put": {
                "tags": [
                    "Agencia"
                ],
                "summary": "Actualizar reserva de aviÃ³n",
                "operationId": "updateAirlineReservation",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateReservationDTO"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Reserva de aviÃ³n actualizada"
                    }
                }
            }
        },
        "/agency/update/hotel": {
            "put": {
                "tags": [
                    "Agencia"
                ],
                "summary": "Actualizar reserva de hotel",
                "operationId": "updateHotelBooking",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateHotelBookingDTO"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Reserva de hotel actualizada"
                    }
                }
            }
        },
        "/booking/{id}": {
            "get": {
                "tags": [
                    "Reservas"
                ],
                "summary": "Obtener reserva por ID",
                "operationId": "getBookingById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Identificador de la reserva",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Reserva encontrada"
                    },
                    "404": {
                        "description": "Reserva no encontrada"
                    }
                }
            }
        },
        "/flight/{id}": {
            "get": {
                "tags": [
                    "Vuelos"
                ],
                "summary": "Obtener vuelo por ID",
                "operationId": "getFlightById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Identificador del vuelo",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Vuelo encontrado"
                    },
                    "404": {
                        "description": "Vuelo no encontrado"
                    }
                }
            }
        },
        "/flight/params": {
            "get": {
                "tags": [
                    "Vuelos"
                ],
                "summary": "Buscar vuelos por parÃ¡metros",
                "operationId": "getFlightByParams",
                "parameters": [
                    {
                        "name": "countryOrigin",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "countryDestination",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "cityOrigin",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "cityDestination",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "dateOrigin",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de vuelos obtenida"
                    }
                }
            }
        },
        "/flight/instance/{id}": {
            "get": {
                "tags": [
                    "Vuelos"
                ],
                "summary": "Obtener instancia de vuelo por ID",
                "operationId": "getFlightInstanceById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Identificador de la instancia de vuelo",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Instancia encontrada"
                    },
                    "404": {
                        "description": "Instancia no encontrada"
                    }
                }
            }
        },
        "/reservation/{id}": {
            "get": {
                "tags": [
                    "Reservas"
                ],
                "summary": "Obtener reserva por ID",
                "operationId": "getReservation",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Identificador de la reserva",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Reserva encontrada"
                    },
                    "404": {
                        "description": "Reserva no encontrada"
                    }
                }
            }
        },
        "/room/params": {
            "get": {
                "tags": [
                    "Room"
                ],
                "summary": "Buscar habitaciones por paÃ­s y nombre del hotel",
                "operationId": "getRoomByCountryAndNameHotel",
                "parameters": [
                    {
                        "name": "country",
                        "in": "query",
                        "description": "PaÃ­s donde se ubica el hotel",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "nameHotel",
                        "in": "query",
                        "description": "Nombre del hotel",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "country",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "nameHotel",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de habitaciones obtenida"
                    }
                }
            }
        },
        "/room/{id}": {
            "get": {
                "tags": [
                    "Room"
                ],
                "summary": "Obtener una habitaciÃ³n por ID",
                "operationId": "getRoomById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Identificador de la habitaciÃ³n",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "integer",
                                "format": "int64"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "HabitaciÃ³n encontrada"
                    },
                    "404": {
                        "description": "HabitaciÃ³n no encontrada"
                    }
                }
            }
        },
        "/user/create": {
            "post": {
                "tags": [
                    "User"
                ],
                "summary": "Crear usuario",
                "operationId": "createUser",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateUserDTO"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Creado"
                    }
                }
            }
        },
        "/user": {
            "post": {
                "tags": [
                    "User"
                ],
                "summary": "Obtener usuario por ID",
                "operationId": "getUserById",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/LoginUserDTO"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "404": {
                        "description": "No encontrado"
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "FlightInstanceSeatsDTO": {
                "type": "object",
                "properties": {
                    "idFlightInstance": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "numberSeats": {
                        "type": "integer",
                        "format": "int32"
                    }
                }
            },
            "ReservationAirlineRequestDTO": {
                "type": "object",
                "properties": {
                    "dni": {
                        "type": "string"
                    },
                    "idUser": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "listIdFlightInstanceSeats": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/FlightInstanceSeatsDTO"
                        }
                    }
                }
            },
            "CreateAirlineAndHotelReservationDTO": {
                "type": "object",
                "properties": {
                    "idUser": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "customer": {
                        "$ref": "#/components/schemas/CustomerDTO"
                    },
                    "infoReservation": {
                        "$ref": "#/components/schemas/CreateAirlineAndHotelReservationInfoDTO"
                    }
                }
            },
            "CreateAirlineAndHotelReservationInfoDTO": {
                "type": "object",
                "properties": {
                    "idCountry": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "startDate": {
                        "type": "string"
                    },
                    "endDate": {
                        "type": "string"
                    },
                    "numberOfNights": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "peopleNumber": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "withBreakfast": {
                        "type": "boolean"
                    },
                    "flightInstances": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/FlightInstanceSeatsDTO"
                        }
                    },
                    "roomIds": {
                        "type": "array",
                        "items": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                }
            },
            "CustomerDTO": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string"
                    },
                    "phone": {
                        "type": "string"
                    },
                    "dni": {
                        "type": "string"
                    }
                }
            },
            "CreateHotelBookingDTO": {
                "type": "object",
                "properties": {
                    "customer": {
                        "$ref": "#/components/schemas/CustomerDTO"
                    },
                    "startDate": {
                        "type": "string"
                    },
                    "endDate": {
                        "type": "string"
                    },
                    "numberOfNights": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "withBreakfast": {
                        "type": "boolean"
                    },
                    "peopleNumber": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "userId": {
                        "type": "string"
                    },
                    "roomsIds": {
                        "type": "array",
                        "items": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                }
            },
            "UpdateReservationBookingDTO": {
                "type": "object",
                "properties": {
                    "bookingId": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "customerDNI": {
                        "type": "string"
                    },
                    "startDate": {
                        "type": "string"
                    },
                    "endDate": {
                        "type": "string"
                    },
                    "numberOfNights": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "withBreakfast": {
                        "type": "boolean"
                    },
                    "peopleNumber": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "roomsInfo": {
                        "type": "array",
                        "items": {
                            "type": "integer",
                            "format": "int64"
                        }
                    },
                    "idReservation": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "idTravel": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "flightInstanceSeats": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/FlightInstanceSeatsDTO"
                        }
                    }
                }
            },
            "UpdateReservationDTO": {
                "type": "object",
                "properties": {
                    "idReservation": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "idTravel": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "flightInstanceSeats": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/FlightInstanceSeatsDTO"
                        }
                    }
                }
            },
            "UpdateHotelBookingDTO": {
                "type": "object",
                "properties": {
                    "bookingId": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "travelId": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "customerDNI": {
                        "type": "string"
                    },
                    "startDate": {
                        "type": "string"
                    },
                    "endDate": {
                        "type": "string"
                    },
                    "numberOfNights": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "withBreakfast": {
                        "type": "boolean"
                    },
                    "peopleNumber": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "roomsInfo": {
                        "type": "array",
                        "items": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                }
            },
            "CreateUserDTO": {
                "type": "object",
                "properties": {
                    "born": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "password": {
                        "type": "string"
                    },
                    "phone": {
                        "type": "string"
                    },
                    "surname": {
                        "type": "string"
                    },
                    "typeUser": {
                        "type": "integer",
                        "format": "int64"
                    }
                }
            },
            "LoginUserDTO": {
                "type": "object",
                "properties": {
                    "email": {
                        "type": "string",
                        "description": "Correo electrÃ³nico del usuario",
                        "example": "user@example.com"
                    },
                    "password": {
                        "type": "string",
                        "description": "ContraseÃ±a del usuario",
                        "example": "password123"
                    }
                },
                "description": "Credenciales de acceso del usuario"
            }
        }
    }
}